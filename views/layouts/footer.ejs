<footer class="text-center">
    &copy; <%= new Date().getFullYear() + ' - All right reserved.' %>
</footer>

<script>
    window.onload = function(){
        floatingMessage('<%= locals.message ? message : "" %>')

        let btn_edit = document.getElementById('btn-edit')
        if(btn_edit){
            btn_edit.onclick = function(){ editPart() }
        }
    }

    function floatingMessage(msg){
        let fm = document.getElementById('floating-message')
        if(fm && msg != ''){
            fm.parentElement.querySelector('strong').textContent = msg
            fm.classList.add('show')
            setTimeout(function(){
                fm.classList.remove('show')
            }, 4000)
        }
    }

    function editPart(){
        let cb = document.querySelectorAll('input[name="cb"]:checked')
        let arr_cb = Array.from(cb, function(v){ return v.value })
        if(arr_cb.length == 1){
            window.location.href = '/edit/' + arr_cb[0]
        }else{
            const data = { id: arr_cb.join(',') }
            createForm(data)
        }
    }

    function delPart(){
        // axios({
        //     url: '/edit-multi',
        //     method: 'post',
        //     data: { arr_id: arr_cb },
        //     timeout: 3000
        // }).catch(function(err){
        //     floatingMessage(err)
        // })
    }

    function createForm(obj){
        const exsitingForm = document.getElementById('dynamic-form')
        if(exsitingForm){ exsitingForm.remove() }

        const form = document.createElement('form')
        form.id = 'dynamic-form'
        form.action = '/edit-multi'
        form.method = 'post'

        for(const [key, value] of Object.entries(obj)){
            const input = document.createElement('input')
            input.type = 'hidden'
            input.name = key
            input.value = value
            form.appendChild(input)
        }

        document.body.appendChild(form)
        form.submit()
    }
</script>